# R√â√âCRITURE D'URL - GUIDE D'INSTALLATION
Version 1.24

## üìã C'EST QUOI ?

La r√©√©criture d'URL permet de transformer des URLs complexes en URLs simples et √©l√©gantes :

**AVANT :**
- http://localhost/gestion-commandes/index.php
- http://localhost/gestion-commandes/nouvelle-commande.php
- http://localhost/gestion-commandes/editer-commande.php?id=123

**APR√àS :**
- http://localhost/gestion-commandes/
- http://localhost/gestion-commandes/nouvelle
- http://localhost/gestion-commandes/editer/123

## ‚úÖ CONFIGURATION EN LOCAL

### Option 1 : XAMPP / WAMP (Windows)

1. **Activer mod_rewrite dans Apache**
   - Ouvrir : `C:\xampp\apache\conf\httpd.conf`
   - Trouver la ligne : `#LoadModule rewrite_module modules/mod_rewrite.so`
   - Enlever le # : `LoadModule rewrite_module modules/mod_rewrite.so`

2. **Autoriser les .htaccess**
   - Dans le m√™me fichier `httpd.conf`
   - Chercher `<Directory "C:/xampp/htdocs">`
   - Remplacer `AllowOverride None` par `AllowOverride All`

3. **Red√©marrer Apache**
   - Depuis le panneau de contr√¥le XAMPP/WAMP

### Option 2 : MAMP (Mac)

1. **Activer mod_rewrite**
   - Ouvrir : `/Applications/MAMP/conf/apache/httpd.conf`
   - D√©commenter : `LoadModule rewrite_module modules/mod_rewrite.so`

2. **Autoriser les .htaccess**
   - Chercher `<Directory>`
   - Remplacer `AllowOverride None` par `AllowOverride All`

3. **Red√©marrer Apache**

### Option 3 : Linux (Apache2)

```bash
# Activer mod_rewrite
sudo a2enmod rewrite

# √âditer la configuration Apache
sudo nano /etc/apache2/sites-available/000-default.conf

# Ajouter dans <VirtualHost>:
<Directory /var/www/html/gestion-commandes>
    AllowOverride All
</Directory>

# Red√©marrer Apache
sudo systemctl restart apache2
```

## üîß CONFIGURATION DU FICHIER .htaccess

Le fichier `.htaccess` est d√©j√† inclus dans le projet. V√©rifiez simplement que la ligne `RewriteBase` correspond √† votre installation :

```apache
RewriteBase /gestion-commandes/
```

Si votre projet est √† la racine :
```apache
RewriteBase /
```

## üìù URLS DISPONIBLES

Apr√®s configuration, vous pouvez utiliser ces URLs :

| URL Courte | URL Compl√®te | Description |
|------------|--------------|-------------|
| `/` | `index.php` | Page d'accueil |
| `/nouvelle` | `nouvelle-commande.php` | Nouvelle commande |
| `/editer/123` | `editer-commande.php?id=123` | √âditer commande #123 |
| `/recharger/123` | `index.php?recharger=1&id=123` | Recharger commande #123 |
| `/supprimer/123` | `index.php?supprimer=1&id=123` | Supprimer commande #123 |
| `/corbeille` | `index.php?corbeille=confirme` | Vider la corbeille |
| `/nettoyer` | `index.php?nettoyer_downloads=confirme` | Nettoyer les CSV |

## ‚ö†Ô∏è IMPORTANT

**Le .htaccess fonctionne UNIQUEMENT avec Apache !**

Si vous utilisez :
- **Nginx** : Utilisez une configuration nginx.conf diff√©rente
- **PHP Built-in Server** (`php -S`) : La r√©√©criture ne fonctionnera PAS
- **IIS (Windows Server)** : Utilisez un fichier web.config

## üß™ TESTER LA CONFIGURATION

1. V√©rifier que mod_rewrite est actif :
   ```bash
   # Linux/Mac
   apache2 -M | grep rewrite
   
   # Windows (dans cmd)
   httpd -M | findstr rewrite
   ```

2. Tester dans le navigateur :
   - http://localhost/gestion-commandes/ (doit afficher l'index)
   - http://localhost/gestion-commandes/nouvelle (doit afficher le formulaire)

## ‚ùì PROBL√àMES COURANTS

**Erreur 500 Internal Server Error**
‚Üí mod_rewrite n'est pas activ√©

**Page 404 Not Found**
‚Üí V√©rifier le RewriteBase dans .htaccess

**Les URLs longues fonctionnent mais pas les courtes**
‚Üí AllowOverride n'est pas configur√© sur "All"

## üîí S√âCURIT√â INCLUSE

Le .htaccess inclut aussi des r√®gles de s√©curit√© :
- Blocage des fichiers sensibles (.env, .sql, .md, .txt, .log)
- Blocage de l'acc√®s direct aux dossiers classes/ et controllers/
- Protection du fichier config.php

## üí° BESOIN D'AIDE ?

Si la r√©√©criture d'URL ne fonctionne pas, vous pouvez continuer √† utiliser les URLs classiques :
- index.php
- nouvelle-commande.php
- editer-commande.php?id=123

L'application fonctionne parfaitement avec ou sans r√©√©criture d'URL !
